function d(r){return r.replace(/([a-z])([A-Z])/g,"$1-$2").toLowerCase()}function l(r){return r=r.replace(/-([a-z])/g,(e,t)=>t.toUpperCase()),r.charAt(0).toLowerCase()+r.slice(1)}function a(r,e){return r.matches(e)?r:r.querySelector(e)}function c(r,e){let t=[];return r.matches(e)&&t.push(r),t.push(...Array.from(r.querySelectorAll(e))),t}var o=class{element;initialized=!1;DOM={};controllerName;controllerKebabName;constructor(e){this.element=e,this.controllerName=l(this.getControllerName()),this.controllerKebabName=d(this.controllerName),this.init()}init(){this.initialized||(this.connect(),this.setupActions(),this.initialized=!0)}initializeDOM(e){return this.DOM={el:this.element,...e},e}getDOMElement(e){return Array.isArray(this.DOM[e])?this.DOM[e][0]:this.DOM[e]}getDOMArray(e){let t=this.DOM[e];return t?Array.isArray(t)?t:[t]:[]}getTarget(e,t){let n=t||this.element,i=`[data-${this.controllerKebabName}-target="${e}"]`;return a(n,i)}getTargets(e,t){let n=t||this.element;return c(n,`[data-${this.controllerKebabName}-target="${e}"]`)}getGlobalTarget(e){return document.querySelector(`[data-${this.controllerKebabName}-target="${e}"]`)}setupActions(){c(this.element,"[data-action]").forEach(t=>{let n=t.getAttribute("data-action");if(n){let[i,s]=n.split("->"),[h,g]=s.split("#");if(h===this.controllerKebabName){let u=this[g];typeof u=="function"&&t.addEventListener(i,m=>{let b=this.extractActionParams(t);m.params=b,u.call(this,m)})}}})}extractActionParams(e){let t={};for(let[n,i]of Object.entries(e.dataset))if(n.startsWith(this.controllerName)&&n.endsWith("Param")){let s=l(n.slice(this.controllerName.length,-5));t[s]=this.parseParamValue(i)}return t}parseParamValue(e){if(e==null||e.trim()==="")return"";let t=e.trim();if(/^(true|false)$/i.test(t))return t.toLowerCase()==="true";if(/^[+-]?\d+(\.\d+)?([eE][+-]?\d+)?$/.test(t)){let n=Number(t);if(!Number.isNaN(n)&&Number.isFinite(n))return n}if(/^(null|undefined)$/i.test(t))return t.toLowerCase()==="null"?null:void 0;if(/^[{[]/.test(t)||/^".*"$/.test(t))try{return JSON.parse(t)}catch{}return e}getValue(e,t){let n=`data-${this.controllerKebabName}-${e}-value`,i=t||this.element,s=a(i,`[${n}]`);return s&&s.getAttribute(n)||""}setValue(e,t,n){let i=`data-${this.controllerKebabName}-${e}-value`;(n||this.element).setAttribute(i,t)}hasValue(e,t){let n=`data-${this.controllerKebabName}-${e}-value`,i=t||this.element;return a(i,`[${n}]`)!==null}on(e,t){document.addEventListener(e,t)}dispatch(e,t={}){let n=new CustomEvent(e,{detail:t,bubbles:!0});document.dispatchEvent(n)}getControllerName(){return this.constructor.name.replace(/^_/,"").replace(/Controller$/,"")}};var p=class extends o{connect(){this.initializeDOM({input:this.getTarget("input"),breadcrumb:this.getTarget("breadcrumb")})}searchUrl(e){e.preventDefault();let n=this.getDOMElement("input")?.value.trim();if(n){/^https?:\/\//i.test(n)||(n=`${window.location.origin}${n.startsWith("/")?"":"/"}${n}`);try{window.location.href=new URL(n).href}catch{console.error("SearchBarController: Invalid URL. Please enter a valid URL starting with http:// or https://.")}}else console.error("SearchBarController: Please enter a URL to search.")}};export{p as SearchbarController};
