function m(r){return r.replace(/([a-z])([A-Z])/g,"$1-$2").toLowerCase()}function o(r){return r=r.replace(/-([a-z])/g,(e,t)=>t.toUpperCase()),r.charAt(0).toLowerCase()+r.slice(1)}function a(r,e){return r.matches(e)?r:r.querySelector(e)}function l(r,e){let t=[];return r.matches(e)&&t.push(r),t.push(...Array.from(r.querySelectorAll(e))),t}var d=class{element;initialized=!1;DOM={};controllerName;controllerKebabName;constructor(e){this.element=e,this.controllerName=o(this.getControllerName()),this.controllerKebabName=m(this.controllerName),this.init()}init(){this.initialized||(this.connect(),this.setupActions(),this.initialized=!0)}initializeDOM(e){return this.DOM={el:this.element,...e},e}getDOMElement(e){return Array.isArray(this.DOM[e])?this.DOM[e][0]:this.DOM[e]}getDOMArray(e){let t=this.DOM[e];return t?Array.isArray(t)?t:[t]:[]}getTarget(e,t){let n=t||this.element,s=`[data-${this.controllerKebabName}-target="${e}"]`;return a(n,s)}getTargets(e,t){let n=t||this.element;return l(n,`[data-${this.controllerKebabName}-target="${e}"]`)}getGlobalTarget(e){return document.querySelector(`[data-${this.controllerKebabName}-target="${e}"]`)}setupActions(){l(this.element,"[data-action]").forEach(t=>{let n=t.getAttribute("data-action");if(n){let[s,i]=n.split("->"),[p,h]=i.split("#");if(p===this.controllerKebabName){let c=this[h];typeof c=="function"&&t.addEventListener(s,u=>{let g=this.extractActionParams(t);u.params=g,c.call(this,u)})}}})}extractActionParams(e){let t={};for(let[n,s]of Object.entries(e.dataset))if(n.startsWith(this.controllerName)&&n.endsWith("Param")){let i=o(n.slice(this.controllerName.length,-5));t[i]=this.parseParamValue(s)}return t}parseParamValue(e){if(e==null||e.trim()==="")return"";let t=e.trim();if(/^(true|false)$/i.test(t))return t.toLowerCase()==="true";if(/^[+-]?\d+(\.\d+)?([eE][+-]?\d+)?$/.test(t)){let n=Number(t);if(!Number.isNaN(n)&&Number.isFinite(n))return n}if(/^(null|undefined)$/i.test(t))return t.toLowerCase()==="null"?null:void 0;if(/^[{[]/.test(t)||/^".*"$/.test(t))try{return JSON.parse(t)}catch{}return e}getValue(e,t){let n=`data-${this.controllerKebabName}-${e}-value`,s=t||this.element,i=a(s,`[${n}]`);return i&&i.getAttribute(n)||""}setValue(e,t,n){let s=`data-${this.controllerKebabName}-${e}-value`;(n||this.element).setAttribute(s,t)}hasValue(e,t){let n=`data-${this.controllerKebabName}-${e}-value`,s=t||this.element;return a(s,`[${n}]`)!==null}on(e,t){document.addEventListener(e,t)}dispatch(e,t={}){let n=new CustomEvent(e,{detail:t,bubbles:!0});document.dispatchEvent(n)}getControllerName(){return this.constructor.name.replace(/^_/,"").replace(/Controller$/,"")}};export{d as BaseController};
