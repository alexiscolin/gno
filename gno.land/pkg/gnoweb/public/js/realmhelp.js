function d(s,t=250){let e;return function(...n){e!==void 0&&clearTimeout(e),e=setTimeout(()=>{s.apply(this,n)},t)}}function u(s){return s.replace(/([$`"\\!|&;<>*?{}()])/g,"\\$1")}function c(s,t,e=30){let n=new Date;n.setTime(n.getTime()+e*24*60*60*1e3),document.cookie=`${s}=${encodeURIComponent(t)};expires=${n.toUTCString()};path=/;SameSite=Strict`}function p(s){let t=document.cookie.split("; ").map(e=>e.split("="));for(let[e,n]of t)if(e===s)return decodeURIComponent(n||"");return null}var o=class s{DOM;funcList;static SELECTORS={container:".js-help-view",func:"[data-func]",addressInput:"[data-role='help-input-addr']",cmdModeSelect:"[data-role='help-select-mode']"};constructor(){this.DOM={el:document.querySelector(s.SELECTORS.container),funcs:[],addressInput:null,cmdModeSelect:null},this.funcList=[],this.DOM.el?this.init():console.warn("Help: Main container not found.")}init(){let{el:t}=this.DOM;t&&(this.DOM.funcs=Array.from(t.querySelectorAll(s.SELECTORS.func)),this.DOM.addressInput=t.querySelector(s.SELECTORS.addressInput),this.DOM.cmdModeSelect=t.querySelector(s.SELECTORS.cmdModeSelect),this.funcList=this.DOM.funcs.map(e=>new l(e)),this.restoreAddress(),this.restoreMode(),this.bindEvents())}restoreValue(t,e,n,r=a=>localStorage.getItem(a)){if(e){let a=r(t);a&&(e.value=a,n(a))}}restoreAddress(){this.restoreValue("helpAddressInput",this.DOM.addressInput,t=>this.funcList.forEach(e=>e.updateAddr(t)),p)}restoreMode(){this.restoreValue("helpCmdMode",this.DOM.cmdModeSelect,t=>this.funcList.forEach(e=>e.updateMode(t)))}bindEvents(){let{addressInput:t,cmdModeSelect:e}=this.DOM,n=d(r=>{let a=r.value;c("helpAddressInput",a,365),this.funcList.forEach(i=>i.updateAddr(a))},50);t?.addEventListener("input",()=>n(t)),e?.addEventListener("change",r=>{let i=r.target.value;localStorage.setItem("helpCmdMode",i),this.funcList.forEach(m=>m.updateMode(i))})}},l=class s{DOM;funcName;static SELECTORS={address:"[data-role='help-code-address']",args:"[data-role='help-code-args']",mode:"[data-code-mode]",paramInput:"[data-role='help-param-input']",send:"[data-role='help-code-send']",sendInput:"[data-role='help-send-input']"};constructor(t){this.DOM={el:t,addrs:Array.from(t.querySelectorAll(s.SELECTORS.address)),args:Array.from(t.querySelectorAll(s.SELECTORS.args)),modes:Array.from(t.querySelectorAll(s.SELECTORS.mode)),paramInputs:Array.from(t.querySelectorAll(s.SELECTORS.paramInput)),send:Array.from(t.querySelectorAll(s.SELECTORS.send)),sendInput:t.querySelector(s.SELECTORS.sendInput)},this.funcName=t.dataset.func||null,this.initializeArgs(),this.bindEvents()}static sanitizeArgsInput(t){let e=t.dataset.param||"",n=t.value.trim();return e||console.warn("sanitizeArgsInput: param is missing in arg input dataset."),{paramName:e,paramValue:n}}bindEvents(){let t=d((e,n)=>{e&&this.updateArg(e,n)},50);this.DOM.el.addEventListener("input",e=>{let n=e.target;if(n.dataset.role==="help-param-input"){let{paramName:r,paramValue:a}=s.sanitizeArgsInput(n);t(r,a)}}),this.DOM.el.addEventListener("change",e=>{let n=e.target;n.dataset.role==="help-send-input"&&this.updateSend(n.checked)})}initializeArgs(){this.DOM.paramInputs.forEach(t=>{let{paramName:e,paramValue:n}=s.sanitizeArgsInput(t);e&&this.updateArg(e,n)})}updateArg(t,e){let n=u(e);this.DOM.args.filter(r=>r.dataset.arg===t).forEach(r=>{r.textContent=n||""})}updateSend(t){let e=t?this.DOM.sendInput?.dataset.send??"":"";this.DOM.send.forEach(n=>n.textContent=e)}updateAddr(t){this.DOM.addrs.forEach(e=>{e.textContent=t.trim()||"ADDRESS"})}updateMode(t){this.DOM.modes.forEach(e=>{let n=e.dataset.codeMode===t;e.classList.toggle("inline",n),e.classList.toggle("hidden",!n),e.dataset.copyContent=n?`help-cmd-${this.funcName}`:""})}},M=()=>new o;export{M as default};
