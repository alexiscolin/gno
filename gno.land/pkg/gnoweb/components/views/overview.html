{{ define "renderOverview" }}
<!-- Overview ToC -->
{{ with render .ComponentTOC }}
<aside
  class="first:mt-8 lg:first:mt-0 col-span-1 lg:col-span-3 lg:col-span-3 lg:order-2 lg:row-start-1 lg:row-span-2 relative h-full sidebar"
  aria-label="Table of Contents">
  <div class="sticky top-14 lg:pt-2 sidebar__container">
    <div id="sidebar-summary" class="max-h-screen overflow-scroll no-scrollbar bg-gray-50 lg:bg-transparent rounded-sm">
      <!-- Metadata Section -->
      {{ template "ui/overview_metadata" $ }}

      <!-- TOC Section -->
      {{ template "ui/expend_label" "On this page"}}
      <nav class="toc-nav hidden lg:block text-100 mt-2 lg:mt-0 pb-6 lg:pb-28 px-4 py-2 lg:px-0 *:pl-0">{{ . }}</nav>
    </div>
  </div>
</aside>
{{ end }}

<!-- Overview Header -->
<header class="mt-10 lg:row-start-1 row-span-1 col-span-1 lg:col-span-7 flex flex-col xl:flex-row justify-between mb-4">
  <div class="flex items-center">
    <h1 class="text-600 text-gray-900 font-bold">Package Overview</h1>
  </div>
</header>

<!-- Overview Content -->
{{ template "layout/article" .Article }}
{{ end }}

{{ define "ui/overview_content" }}
<!-- README section -->
{{ if .Readme }}
<div class="mb-8" id="readme">
  <h2 class="text-2xl font-bold mb-2">README</h2>
  <md-renderer class="realm-view block bg-light p-4 rounded">
    {{ render .Readme }}
  </md-renderer>
</div>
{{ end }}

<!-- Functions section -->
{{ if .Functions }}
<div class="mb-8" id="functions">
  <h2 class="text-2xl font-bold mb-2">Functions</h2>
  <ul class="space-y-4">
    {{ range .Functions }}
    <li id="func-{{ .Name }}" class="border-b pb-2">
      <h3 class="font-bold text-lg text-gray-900 mb-1">func {{ .Name }} <span class="text-green-700">Â¶</span></h3>
      {{ if .Doc }}<div class="text-gray-600 text-sm mt-1">{{ .Doc }}</div>{{ end }}
      <div class="flex items-center gap-2 mb-1">
        <pre class="font-mono text-sm bg-gray-100 rounded px-2 py-1 inline-block mb-0"
          id="sig-{{ .Name }}">{{ .Signature }}</pre>
        <button class="js-copy-btn text-gray-400 hover:text-gray-600" data-copy-btn="sig-{{ .Name }}">
          {{ template "ui/copy" }}
        </button>
        <a href="{{ $.PkgPath }}$source&file={{ .File }}#L{{ .Line }}"
          class="ml-2 text-green-700 hover:underline font-mono text-xs px-2 py-1 border rounded bg-gray-50">View
          source</a>
      </div>
    </li>
    {{ end }}
  </ul>
</div>
{{ end }}

<!-- Constants section -->
{{ if .Consts }}
<div class="mb-8" id="constants">
  <h2 class="text-2xl font-bold mb-2">Constants</h2>
  <ul>
    {{ range .Consts }}
    <li class="mb-2">
      <pre class="font-mono text-sm bg-gray-100 rounded px-2 py-1 inline-block mb-0"
        id="const-{{ .Signature }}">{{ .Signature }}</pre>
      <button class="js-copy-btn text-gray-400 hover:text-gray-600" data-copy-btn="const-{{ .Signature }}">
        {{ template "ui/copy" }}
      </button>
      {{ if .Doc }}<div class="text-gray-600 text-sm mt-1">{{ .Doc }}</div>{{ end }}
    </li>
    {{ end }}
  </ul>
</div>
{{ end }}

<!-- Variables section -->
{{ if .Vars }}
<div class="mb-8" id="variables">
  <h2 class="text-2xl font-bold mb-2">Variables</h2>
  <ul>
    {{ range .Vars }}
    <li class="mb-2">
      <pre class="font-mono text-sm bg-gray-100 rounded px-2 py-1 inline-block mb-0"
        id="var-{{ .Signature }}">{{ .Signature }}</pre>
      <button class="js-copy-btn text-gray-400 hover:text-gray-600" data-copy-btn="var-{{ .Signature }}">
        {{ template "ui/copy" }}
      </button>
      {{ if .Doc }}<div class="text-gray-600 text-sm mt-1">{{ .Doc }}</div>{{ end }}
    </li>
    {{ end }}
  </ul>
</div>
{{ end }}

<!-- Types section -->
{{ if .Types }}
<div class="mb-8" id="types">
  <h2 class="text-2xl font-bold mb-2">Types</h2>
  <ul>
    {{ range .Types }}
    <li class="mb-2">
      <pre class="font-mono text-sm bg-gray-100 rounded px-2 py-1 inline-block mb-0"
        id="type-{{ .Name }}">{{ .Signature }}</pre>
      <button class="js-copy-btn text-gray-400 hover:text-gray-600" data-copy-btn="type-{{ .Name }}">
        {{ template "ui/copy" }}
      </button>
      {{ if .Doc }}<div class="text-gray-600 text-sm mt-1">{{ .Doc }}</div>{{ end }}
    </li>
    {{ end }}
  </ul>
</div>
{{ end }}

<!-- Files section -->
{{ if .Files }}
<div class="mb-8" id="files">
  <h2 class="text-2xl font-bold mb-2">Source Files</h2>
  <ul>
    {{ range .Files }}
    <li class="border-b first:border-t">
      <a class="py-2 flex justify-between items-center px-2 text-gray-600 line-clamp-2 hover:bg-gray-100"
        href="{{ $.PkgPath }}$source&file={{ . }}">
        <span class="flex items-center gap-2">
          <svg class="w-4 h-4 shrink-0">
            <use href="#ico-file"></use>
          </svg>
          {{ . }}
        </span>
        <span class="text-gray-300">Open</span>
      </a>
    </li>
    {{ end }}
  </ul>
</div>
{{ end }}

<!-- Directories section -->
{{ if .Dirs }}
<div class="mb-8" id="directories">
  <h2 class="text-2xl font-bold mb-2">Directories</h2>
  <ul>
    {{ range .Dirs }}
    <li>
      <a href="{{ $.PkgPath }}/{{ . }}" class="text-green-700 hover:underline font-mono">{{ . }}</a>
    </li>
    {{ end }}
  </ul>
</div>
{{ end }}

<!-- Imports section -->
{{ if .Imports }}
<div class="mb-8" id="imports">
  <h2 class="text-2xl font-bold mb-2">Imports</h2>
  <ul>
    {{ range .Imports }}
    <li>
      {{ if .Link }}
      <a href="{{ .Link }}" class="text-blue-700 hover:underline font-mono" rel="noopener noreferrer ugc">
        {{ .Name }}
      </a>
      {{ else }}
      <span class="text-gray-500 font-mono">{{ .Name }}</span>
      {{ end }}
    </li>
    {{ end }}
  </ul>
</div>
{{ end }}

{{ if and (not .Readme) (not .Functions) (not .Files) }}
<div class="text-gray-400 italic">No documentation, functions or files found in this package.</div>
{{ end }}
{{ end }}

{{ define "ui/overview_metadata" }}
{{ if .PackageInfo }}
<div class="mb-6 p-4 bg-gray-50 rounded-lg border">
  <h3 class="text-sm font-semibold text-gray-700 mb-3">Package Info</h3>

  <!-- Module -->
  {{ if .PackageInfo.Module }}
  <div class="mb-2">
    <span class="text-xs text-gray-500">Module:</span>
    <div class="text-xs font-mono text-gray-700 break-all">{{ .PackageInfo.Module }}</div>
  </div>
  {{ end }}

  <!-- Version -->
  {{ if .PackageInfo.GnoVersion }}
  <div class="mb-2">
    <span class="text-xs text-gray-500">Gno Version:</span>
    <div class="text-xs font-mono text-gray-700">{{ .PackageInfo.GnoVersion }}</div>
  </div>
  {{ end }}

  <!-- Package Type -->
  {{ if .PackageInfo.PackageType }}
  <div class="mb-2">
    <span class="text-xs text-gray-500">Type:</span>
    <div class="text-xs font-mono text-gray-700">{{ .PackageInfo.PackageType }}</div>
  </div>
  {{ end }}

  <!-- Creator -->
  <div class="mb-2">
    <span class="text-xs text-gray-500">Creator:</span>
    {{ if .PackageInfo.Creator }}
    <div class="text-xs font-mono text-gray-700">
      <a href="/u/{{ .PackageInfo.Creator }}" class="text-blue-600 hover:text-blue-800 hover:underline"
        title="{{ .PackageInfo.Creator }}">
        Gnome {{ truncateMiddle .PackageInfo.Creator 4 }}
      </a>
    </div>
    {{ else }}
    <div class="text-xs font-mono text-gray-500 italic">
      No Creator
    </div>
    {{ end }}
  </div>

  <!-- Height -->
  {{ if and .PackageInfo.Height (gt .PackageInfo.Height 0) }}
  <div class="mb-2">
    <span class="text-xs text-gray-500">Block Height:</span>
    <div class="text-xs font-mono text-gray-700">{{ .PackageInfo.Height }}</div>
  </div>
  {{ end }}

  <!-- Badges -->
  <div class="flex flex-wrap gap-1 mt-3">
    {{ if .PackageInfo.Draft }}
    <span class="inline-flex items-center px-2 py-1 rounded-full text-xs font-medium bg-yellow-100 text-yellow-800">
      Draft
    </span>
    {{ else }}
    <span class="inline-flex items-center px-2 py-1 rounded-full text-xs font-medium bg-green-100 text-green-800">
      Published
    </span>
    {{ end }}
    {{ if .PackageInfo.Private }}
    <span class="inline-flex items-center px-2 py-1 rounded-full text-xs font-medium bg-red-100 text-red-800">
      Private
    </span>
    {{ else }}
    <span class="inline-flex items-center px-2 py-1 rounded-full text-xs font-medium bg-green-100 text-green-800">
      Public
    </span>
    {{ end }}
    {{ if .PackageInfo.License }}
    <a href="{{ $.PkgPath }}$source&file=LICENSE.md"
      class="inline-flex items-center px-2 py-1 rounded-full text-xs font-medium bg-blue-100 text-blue-800 hover:bg-blue-200">
      {{ .PackageInfo.License }}
    </a>
    {{ else }}
    <span class="inline-flex items-center px-2 py-1 rounded-full text-xs font-medium bg-gray-100 text-gray-600">
      No License
    </span>
    {{ end }}
    {{ if .PackageInfo.HasTests }}
    <span class="inline-flex items-center px-2 py-1 rounded-full text-xs font-medium bg-green-100 text-green-800">
      Tests
    </span>
    {{ else }}
    <span class="inline-flex items-center px-2 py-1 rounded-full text-xs font-medium bg-red-100 text-red-800">
      No Tests
    </span>
    {{ end }}
    {{ if .PackageInfo.HasReadme }}
    <span class="inline-flex items-center px-2 py-1 rounded-full text-xs font-medium bg-green-100 text-green-800">
      Documentation
    </span>
    {{ else }}
    <span class="inline-flex items-center px-2 py-1 rounded-full text-xs font-medium bg-red-100 text-red-800">
      No Documentation
    </span>
    {{ end }}
  </div>
</div>
{{ end }}

<!-- Statistics -->
<div class="mb-6 p-4 bg-gray-50 rounded-lg border">
  <h3 class="text-sm font-semibold text-gray-700 mb-3">Statistics</h3>

  <div class="space-y-2 text-xs">
    <div class="flex justify-between">
      <span class="text-gray-500">Files:</span>
      <span class="font-mono text-gray-700">{{ .FileCounter }}</span>
    </div>
    <div class="flex justify-between">
      <span class="text-gray-500">Functions:</span>
      <span class="font-mono text-gray-700">{{ len .Functions }}</span>
    </div>
    <div class="flex justify-between">
      <span class="text-gray-500">Types:</span>
      <span class="font-mono text-gray-700">{{ len .Types }}</span>
    </div>
    <div class="flex justify-between">
      <span class="text-gray-500">Directories:</span>
      <span class="font-mono text-gray-700">{{ len .Dirs }}</span>
    </div>
    <div class="flex justify-between">
      <span class="text-gray-500">Imports:</span>
      <span class="font-mono text-gray-700">{{ len .Imports }}</span>
    </div>
  </div>
</div>
{{ end }}